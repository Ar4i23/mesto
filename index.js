(()=>{"use strict";var t=document.querySelector(".modal__input_modal_name"),e=document.querySelector(".modal__input_modal_about"),n=document.querySelector(".profile__image-ellipse"),r=(document.querySelector(".modal__input_naming"),document.querySelector(".modal__input_linking"),document.querySelector(".profile__info-title")),o=document.querySelector(".profile__info-subtitle"),i=document.querySelector(".profile__info-edit-button"),u=document.querySelector(".profile__add-botton"),a=document.forms["profile-form-avatar"],c=document.forms["profile-form-cread"],l=document.forms["profile-form-edit"],s=(document.querySelector(".modal__img"),document.querySelector(".modal__heading"),document.querySelector("#new-element").content),f=document.querySelector(".elements"),y=(document.querySelectorAll(".modal"),{formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_invalid",activeButtonClass:"modal__button",inputErrorClass:"modal__input_error"});function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==p(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===p(o)?o:String(o)),r)}var o}var d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=e.baseUrl,this._headers=e.headers,this._authorization=this._headers.authorization,this._contenType=this._headers["Content-Type"]}var e,n;return e=t,(n=[{key:"_checkResponse",value:function(t){return t.ok?t.json():Promise.reject}},{key:"getCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:{authorization:this._authorization}}).then(this._checkResponse)}},{key:"addCardByServer",value:function(t){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t.name,link:t.link})}).then(this._checkResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:{authorization:this._authorization}}).then(this._checkResponse)}},{key:"setUserInfo",value:function(t){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t.name,about:t.about})}).then(this._checkResponse)}},{key:"setUserAvatar",value:function(t){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t.avatar})}).then(this._checkResponse)}},{key:"deleteCardByServer",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t._id),{method:"DELETE",headers:{authorization:this._authorization}}).then(this._checkResponse)}},{key:"addLike",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"PUT",headers:{authorization:this._authorization}}).then(this._checkResponse)}},{key:"deleteLike",value:function(t){return fetch("".concat(this._baseUrl,"/cards/").concat(t,"/likes"),{method:"DELETE",headers:{authorization:this._authorization}}).then(this._checkResponse)}}])&&h(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==m(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===m(o)?o:String(o)),r)}var o}var _=function(){function t(e,n,r,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._data=e,this.handleClickImg=n,this.handleClickBtnDelete=o,this._changeLike=i,this._template=r,this._cardId=e._id,this._userId=e.owner._id,this._arrayLikes=e.likes,this._arrayLikesLength=e.likes.length,this._myId=e.myId,this._card=this._template.cloneNode(!0),this._element=this._card.querySelector(".element"),this._btnDelete=this._element.querySelector(".element__button-delete"),this._itemImg=this._element.querySelector(".element__image"),this._itemTitle=this._element.querySelector(".element__title"),this._btnLike=this._element.querySelector(".element__button-like"),this._counterLike=this._element.querySelector(".element__counter-like"),this._imgCard=this._element.querySelector(".element__image")}var e,n;return e=t,(n=[{key:"_generateCard",value:function(){return this._checkVisibleForTrashButton(),this._checkLikeStatus(),this._itemImg.src=this._data.link,this._itemImg.alt=this._data.name,this._itemTitle.textContent=this._data.name,this._card}},{key:"_checkLikeStatus",value:function(){var t=this;this._arrayLikes.forEach((function(e){e._id!==t._myId||t._btnLike.classList.add("element__button-like_active")})),this._counterLike.textContent=this._arrayLikesLength}},{key:"_checkVisibleForTrashButton",value:function(){this._btnDelete.classList.add(this._userId===this._myId?"element__button-delete_visible":"element__button-delete_hidden")}},{key:"_handleLike",value:function(){this._changeLike(this._cardId,this._btnLike)}},{key:"_setEventListeners",value:function(){var t=this;this._btnDelete.addEventListener("click",(function(){t.handleClickBtnDelete(t._data,t)})),this._btnLike.addEventListener("click",(function(){t._handleLike()})),this._imgCard.addEventListener("click",(function(){t.handleClickImg(t._data.name,t._data.link)}))}},{key:"changedLike",value:function(t){this._btnLike.classList.toggle("element__button-like_active"),this._counterLike.textContent=t.length}},{key:"getCard",value:function(){return this._generateCard(),this._setEventListeners(),this._card}},{key:"removeCard",value:function(){this._element.remove()}}])&&b(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===v(o)?o:String(o)),r)}var o}var g=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=n}var e,n;return e=t,(n=[{key:"renderItem",value:function(t){this._renderer(t)}},{key:"addItemPrepend",value:function(t){this._container.prepend(t)}}])&&S(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==k(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===k(o)?o:String(o)),r)}var o}console.log;var E=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._btnClose=this._popup.querySelector(".modal__close"),this._hendleEscClose=this._hendleEscClose.bind(this),this.close=this.close.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._hendleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._hendleEscClose)}},{key:"_hendleEscClose",value:function(t){if("Escape"===t.key){var e=document.querySelector("modal_opened");this.close(e)}}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("mousedown",(function(e){e.target.classList.contains("modal_opened")&&t.close(),e.target.classList.contains("modal__close")&&t.close()}))}}])&&w(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==j(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===j(o)?o:String(o)),r)}var o}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=C(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},P.apply(this,arguments)}function L(t,e){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},L(t,e)}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},C(t)}var I=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=C(r);if(o){var n=C(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n,r=e.hendleDelete;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._hendleDelete=r,n._form=n._popup.querySelector(".modal__form"),n._btnYes=n._form.querySelector(".modal__button"),n._btnYesDefault=n._btnYes.textContent,n}return e=u,(n=[{key:"open",value:function(t,e){P(C(u.prototype),"open",this).call(this),this._element=t,this._btnDelete=e}},{key:"setupDefaultText",value:function(){this._btnYes.textContent=this._btnYesDefault}},{key:"setEventListeners",value:function(){var t=this;P(C(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._hendleDelete(t._element,t._btnDelete),t._btnYes.textContent="".concat(t._btnYes.textContent," ...")}))}}])&&O(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(E);function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==T(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===T(o)?o:String(o)),r)}var o}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=B(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},q.apply(this,arguments)}function x(t,e){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},x(t,e)}function B(t){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},B(t)}var D=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=B(r);if(o){var n=B(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=i.call(this,t))._img=e._popup.querySelector(".modal__img"),e._title=e._popup.querySelector(".modal__heading"),e}return e=u,(n=[{key:"open",value:function(t,e){q(B(u.prototype),"open",this).call(this),this._img.src=e,this._img.alt=t,this._title.textContent=t}}])&&R(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(E);function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==U(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===U(o)?o:String(o)),r)}var o}const z=function(){function t(e,n){var r=n.inputSelector,o=n.submitButtonSelector,i=n.inactiveButtonClass,u=n.activeButtonClass,a=n.inputErrorClass;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._form=e,this._inputs=Array.from(this._form.querySelectorAll(r)),this._button=this._form.querySelector(o),this._inputErrorClass=a,this._inactiveButton=i,this._activeButton=u}var e,n;return e=t,(n=[{key:"enableValidation",value:function(){this._setEventListenersValidation()}},{key:"_setEventListenersValidation",value:function(){var t=this;this._inputs.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._hasInvalidInput()?t._disableButton():t._enableButton()}))}))}},{key:"_checkInputValidity",value:function(t){var e=document.querySelector("#".concat(t.id,"-error"));t.validity.valid?(e.textContent="",this._removeRedLine(t)):(e.textContent=t.validationMessage,this._addRedLine(t))}},{key:"_hasInvalidInput",value:function(){return this._inputs.some((function(t){return!t.validity.valid}))}},{key:"_disableButton",value:function(){this._button.classList.add(this._inactiveButton),this._button.setAttribute("disabled",!0)}},{key:"_enableButton",value:function(){this._button.classList.remove(this._inactiveButton),this._button.removeAttribute("disabled")}},{key:"_removeRedLine",value:function(t){t.classList.remove(this._inputErrorClass)}},{key:"_addRedLine",value:function(t){t.classList.add(this._inputErrorClass)}},{key:"resetErrorAndClearInput",value:function(){var t=this;this._inputs.forEach((function(e){document.querySelector("#".concat(e.id,"-error")).textContent="",e.classList.remove(t._inputErrorClass)})),this._disableButton()}}])&&A(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==V(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===V(o)?o:String(o)),r)}var o}function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=F(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},N.apply(this,arguments)}function J(t,e){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},J(t,e)}function F(t){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},F(t)}console.log;var H=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=F(r);if(o){var n=F(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===V(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n,r=e.formSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._formSubmit=r,n._form=n._popup.querySelector(".modal__form"),n._inputs=n._form.querySelectorAll(".modal__input"),n._btnSave=n._form.querySelector(".modal__button"),n._btnSaveDefault=n._btnSave.textContent,n}return e=u,(n=[{key:"_getInputValues",value:function(){var t={};return this._inputs.forEach((function(e){t[e.name]=e.value})),t}},{key:"open",value:function(){N(F(u.prototype),"open",this).call(this)}},{key:"close",value:function(){N(F(u.prototype),"close",this).call(this),this._form.reset()}},{key:"setupDefaultText",value:function(){this._btnSave.textContent=this._btnSaveDefault}},{key:"setEventListeners",value:function(){var t=this;N(F(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._formSubmit(t._getInputValues()),t._btnSave.textContent="Сохранение ..."}))}}])&&Y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(E);function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function $(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==M(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===M(o)?o:String(o)),r)}var o}var G=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._titleElement=e,this._subtitleElement=n,this._avatarProfilBg=r}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._titleElement.textContent,about:this._subtitleElement.textContent}}},{key:"setUserInfo",value:function(t){this._avatarProfilBg.style.backgroundImage="url(".concat(t.avatar,")"),this._titleElement.textContent=t.name,this._subtitleElement.textContent=t.about}}])&&$(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Q=new d({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-66",headers:{authorization:"e674a970-710a-435e-8ca6-95eeadb2851d","Content-Type":"application/json"}}),W=new z(l,y),X=new z(c,y),Z=new z(a,y);Z.enableValidation(),W.enableValidation(),X.enableValidation(),n.addEventListener("click",(function(){rt.open(),Z.resetErrorAndClearInput()})),i.addEventListener("click",(function(){var n;nt.open(),n=it.getUserInfo(),t.value=n.name,e.value=n.about,W.resetErrorAndClearInput()})),u.addEventListener("click",(function(){tt.open(),X.resetErrorAndClearInput()}));var tt=new H("#my-modal-cread",{formSubmit:function(t){Q.addCardByServer(t).then((function(t){t.myId=t.owner._id,ct.renderItem(t),tt.close()})).catch((function(t){return console.error("Ошибка при создании новой карточки: ".concat(t))})).finally((function(){return tt.setupDefaultText()}))}}),et=new D("#my-modal-image"),nt=new H("#my-modal-edit",{formSubmit:function(t){Q.setUserInfo(t).then((function(t){it.setUserInfo(t),nt.close()})).catch((function(t){return console.error("Ошибка при редактировании профиля: ".concat(t))})).finally((function(){return nt.setupDefaultText()}))}}),rt=new H("#my-modal-avatar",{formSubmit:function(t){Q.setUserAvatar(t).then((function(t){it.setUserInfo(t),rt.close()})).catch((function(t){return console.error("Ошибка при редактировании Аватарки:".concat(t))})).finally((function(){return rt.setupDefaultText()}))}}),ot=new I("#my-modal-delete",{hendleDelete:function(t,e){Q.deleteCardByServer(t).then((function(){e.removeCard(),ot.close()})).catch((function(t){return console.error("Ошибка при удалении карточки:".concat(t))})).finally((function(){return ot.setupDefaultText()}))}}),it=new G(r,o,n);function ut(t,e){ot.open(t,e)}function at(t,e){et.open(t,e)}nt.setEventListeners(),tt.setEventListeners(),et.setEventListeners(),rt.setEventListeners(),ot.setEventListeners();var ct=new g({renderer:function(t){var e,n;n=(e=new _(t,at,s,ut,(function(t,n){n.classList.contains("element__button-like_active")?Q.deleteLike(t).then((function(t){e.changedLike(t.likes)})).catch((function(t){console.error("Ошибка при удалении лайка:".concat(t))})):Q.addLike(t).then((function(t){e.changedLike(t.likes)})).catch((function(t){console.error("Ошибка при добавлении лайка:".concat(t))}))}))).getCard(),ct.addItemPrepend(n)}},f);Promise.all([Q.getUserInfo(),Q.getCards()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return K(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];console.log(i),it.setUserInfo(o),i.reverse().forEach((function(t){t.myId=o._id,ct.renderItem(t)}))})).catch((function(t){return console.error("Ошибка при создании начальных данных страницы: ".concat(t))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxFQUFJVyxjQUFlWCxFQUFJeUMsYUFDakM5SyxNQUFLLFNBQUF3RCxHQUEwQixJLElBQUF1SCxHLEVBQUEsRSw0Q0FBQXZILEksbzJCQUF4QndILEVBQVFELEVBQUEsR0FBRTNCLEVBQVEyQixFQUFBLEdBQ3hCL0csUUFBUUMsSUFBSW1GLEdBQ1pMLEdBQVNlLFlBQVlrQixHQUNyQjVCLEVBQVM2QixVQUFVckksU0FBUSxTQUFDa0IsR0FDMUJBLEVBQVFsQyxLQUFPb0osRUFBU3JLLElBQ3hCMEksR0FBWUMsV0FBV3hGLEVBQ3pCLEdBQ0YsSUFDQ3lGLE9BQU0sU0FBQ0MsR0FBRyxPQUNUeEYsUUFBUXlGLE1BQU0sa0RBQUQxSixPQUFtRHlKLEdBQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL9ChYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGlucHV0cyDQvNC+0LTQsNC70YzQvdC+0LPQviDQvtC60L3QsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPXG5leHBvcnQgY29uc3QgaW5wdXRFZGl0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9faW5wdXRfbW9kYWxfbmFtZScpO1xuZXhwb3J0IGNvbnN0IGlucHV0RWRpdEFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgJy5tb2RhbF9faW5wdXRfbW9kYWxfYWJvdXQnXG4pO1xuLy8g0LDQstCw0YLQsNGA0LrQsCDQv9GA0L7RhNC40LvRj1xuZXhwb3J0IGNvbnN0IGF2YXRhclByb2ZpbEJnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2ltYWdlLWVsbGlwc2UnKTtcbi8vIGlucHV0cyDQvNC+0LTQsNC70YzQvdC+0LPQviDQvtC60L3QsCDQtNC+0LHQsNCy0LvQtdC90LjRjyDQvdC+0LLRi9GFINC60LDRgNGC0L7Rh9C10LpcbmV4cG9ydCBjb25zdCBpbnB1dENyZWFkTmFtaW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19pbnB1dF9uYW1pbmcnKTtcbmV4cG9ydCBjb25zdCBpbnB1dENyZWFkTGlua2luZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICcubW9kYWxfX2lucHV0X2xpbmtpbmcnXG4pO1xuLy8g0LfQsNCz0L7Qu9C+0LLQvtC6INC4INC/0L7QtNC30LDQs9C+0LvQvtCy0L7QuiBwcm9maWxlX19pbmZvXG5leHBvcnQgY29uc3QgdGl0bGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2luZm8tdGl0bGUnKTtcbmV4cG9ydCBjb25zdCBzdWJ0aXRsZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAnLnByb2ZpbGVfX2luZm8tc3VidGl0bGUnXG4pO1xuLy8g0LrQvdC+0L/QutCwINC+0YLQutGA0YvQstCw0L3QuNGPINC80L7QtNCw0LvRjNC90L7Qs9C+INC+0LrQvdCwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y9cbmV4cG9ydCBjb25zdCBidXR0b25PcGVuRWRpdFByb2ZpbGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgJy5wcm9maWxlX19pbmZvLWVkaXQtYnV0dG9uJ1xuKTtcbi8vINC60L3QvtC/0LrQsCDQvtGC0LrRgNGL0LLQsNC90LjRjyDQvNC+0LTQsNC70YzQvdC+0LPQviDQvtC60L3QsCDQtNC+0LHQsNCy0LvQtdC90LjRjyDQvdC+0LLRi9GFINC60LDRgNGC0L7Rh9C10LpcbmV4cG9ydCBjb25zdCBidXR0b25PcGVuQWRkQ2FyZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAnLnByb2ZpbGVfX2FkZC1ib3R0b24nXG4pO1xuLy8g0LrQvdC+0L/QutC4INC30LDQutGA0YvRgtC40Y8g0LzQvtC00LDQu9GM0L3Ri9GFINC+0LrQvtC9INC4INGB0LDQvNC4INC+0LrQvdCwINC4INC40YUg0Y3Qu9C10LzQtdC90YLRi1xuZXhwb3J0IGNvbnN0IGZvcm1BdmF0YXIgPSBkb2N1bWVudC5mb3Jtc1sncHJvZmlsZS1mb3JtLWF2YXRhciddO1xuZXhwb3J0IGNvbnN0IGZvcm1DcmVhZENhcmQgPSBkb2N1bWVudC5mb3Jtc1sncHJvZmlsZS1mb3JtLWNyZWFkJ107XG5leHBvcnQgY29uc3QgZm9ybUVkaXRQcm9maWxlID0gZG9jdW1lbnQuZm9ybXNbJ3Byb2ZpbGUtZm9ybS1lZGl0J107XG5leHBvcnQgY29uc3Qgc3JjSW1nTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2ltZycpO1xuZXhwb3J0IGNvbnN0IGhlYWRpbmdJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2hlYWRpbmcnKTtcbi8vIHRlbXBsYXRlINC60LDRgNGC0L7Rh9C60LBcbmV4cG9ydCBjb25zdCB0ZW1wbGF0ZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmV3LWVsZW1lbnQnKS5jb250ZW50O1xuLy8g0LHQu9C+0LogZWxlbWVudHMg0LrRg9C00LAg0LTQvtCx0LDQstC70Y/RjtGC0YHRjyDQs9C+0YLQvtCy0YvQtSDQutCw0YDRgtC+0YfQutC4XG5leHBvcnQgY29uc3QgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHMnKTtcbi8v0LLRgdC1INC/0L7Qv9Cw0L/Ri1xuZXhwb3J0IGNvbnN0IHBvcHVwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbCcpO1xuXG4vLyDQvNCw0YHRgdC40LIg0YEg0L3QsNC30LLQsNC90LjQtdC8INC4INGB0YHRi9C70LrQvtC5XG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogJ05ldyBZb3JrJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9yYXJlLWdhbGxlcnkuY29tL3VwbG9hZHMvcG9zdHMvOTM0MjA5LU5ldy1Zb3JrLUNpdHktc3RyZWV0LVRpbWVzLVNxdWFyZS5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ9Ct0YHRgtC+0L3QuNGPJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly90b3VyaXNtLmludGVyZmF4LnJ1L2ltYWdlcy9jbXMtaW1hZ2UtMDAwMDA0MDY3LmpwZycsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0J7Qt9C10YDQviDQoNC40YbQsCcsXG4gICAgbGluazogJ2h0dHBzOi8vdnNlZ2RhLXBvbW5pbS5jb20vdXBsb2Fkcy9wb3N0cy8yMDIyLTAzLzE2NDg3NTEzNTNfNDctdnNlZ2RhLXBvbW5pbS1jb20tcC1vemVyby1tYWxheWEtcml0c2EtYWJraGF6aXlhLWZvdG8tNDguanBnJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQkNC30L7RgNGB0LrQuNC1INCe0YHRgtGA0L7QstCwJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly92c2VnZGEtcG9tbmltLmNvbS91cGxvYWRzL3Bvc3RzLzIwMjItMDMvMTY0ODYyNzczN18xMC12c2VnZGEtcG9tbmltLWNvbS1wLWF6b3Jza2llLW9zdHJvdmEtZm90by0xMi5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ9CT0L7Qu9C70LDQvdC00LjRjyAnLFxuICAgIGxpbms6ICdodHRwczovL2ltZzUuZ29vZGZvbi5ydS9vcmlnaW5hbC8zMDAweDIwMDAvZi9jNS9hbXN0ZXJkYW0tdmVjaGVyLW9nbmkta2FuYWwtZ29sbGFuZGlpYS1uaWRlcmxhbmR5LmpwZycsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAn0JjRgdC70LDQvdC00LjRjycsXG4gICAgbGluazogJ2h0dHBzOi8vYXZhdGFycy5kemVuaW5mcmEucnUvZ2V0LXplbl9kb2MvMTA4ODcyL3B1Yl81YWUxMDUyOGJjZTY3ZTU0NjJlYzE2MmFfNWFlMWI2NDI0OGM4NWVjZTI3ZTU1NzU4L3NjYWxlXzEyMDAnLFxuICB9LFxuXTtcbi8v0L7QsdGK0LXQutGCINC60LvRjtGHINC30LDQvdGH0LXQvdC40Y/QvNC4INC00LvRjyDQt9Cw0L/QvtC70L3QtdC90LjRjyDRhNGD0L3QutGG0LjQuVxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogJy5tb2RhbF9fZm9ybScsXG4gIGlucHV0U2VsZWN0b3I6ICcubW9kYWxfX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcubW9kYWxfX2J1dHRvbicsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdtb2RhbF9fYnV0dG9uX2ludmFsaWQnLFxuICBhY3RpdmVCdXR0b25DbGFzczogJ21vZGFsX19idXR0b24nLFxuICBpbnB1dEVycm9yQ2xhc3M6ICdtb2RhbF9faW5wdXRfZXJyb3InLFxufTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gICAgdGhpcy5fYXV0aG9yaXphdGlvbiA9IHRoaXMuX2hlYWRlcnMuYXV0aG9yaXphdGlvbjtcbiAgICB0aGlzLl9jb250ZW5UeXBlID0gdGhpcy5faGVhZGVyc1snQ29udGVudC1UeXBlJ107XG4gIH1cbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XG4gICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdDtcbiAgfVxuICBnZXRDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXG4gICAgICB9LFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBhZGRDYXJkQnlTZXJ2ZXIoZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBsaW5rOiBkYXRhLmxpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcbiAgICAgIH0sXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuICBzZXRVc2VySW5mbyhkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBhYm91dDogZGF0YS5hYm91dCxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cbiAgc2V0VXNlckF2YXRhcihkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXIsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG4gIGRlbGV0ZUNhcmRCeVNlcnZlcihkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7ZGF0YS5faWR9YCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcbiAgICAgIH0sXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuICBhZGRMaWtlKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiAnUFVUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcbiAgICAgIH0sXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGRlbGV0ZUxpa2UoaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxuICAgICAgfSxcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgZGF0YSxcbiAgICBoYW5kbGVDbGlja0ltZyxcbiAgICB0ZW1wbGF0ZUVsZW1lbnQsXG4gICAgaGFuZGxlQ2xpY2tCdG5EZWxldGUsXG4gICAgY2hhbmdlTGlrZVxuICApIHtcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICB0aGlzLmhhbmRsZUNsaWNrSW1nID0gaGFuZGxlQ2xpY2tJbWc7XG4gICAgdGhpcy5oYW5kbGVDbGlja0J0bkRlbGV0ZSA9IGhhbmRsZUNsaWNrQnRuRGVsZXRlO1xuICAgIHRoaXMuX2NoYW5nZUxpa2UgPSBjaGFuZ2VMaWtlO1xuICAgIHRoaXMuX3RlbXBsYXRlID0gdGVtcGxhdGVFbGVtZW50O1xuICAgIHRoaXMuX2NhcmRJZCA9IGRhdGEuX2lkO1xuICAgIHRoaXMuX3VzZXJJZCA9IGRhdGEub3duZXIuX2lkO1xuICAgIHRoaXMuX2FycmF5TGlrZXMgPSBkYXRhLmxpa2VzO1xuICAgIHRoaXMuX2FycmF5TGlrZXNMZW5ndGggPSBkYXRhLmxpa2VzLmxlbmd0aDtcbiAgICB0aGlzLl9teUlkID0gZGF0YS5teUlkO1xuICAgIHRoaXMuX2NhcmQgPSB0aGlzLl90ZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnQnKTtcbiAgICB0aGlzLl9idG5EZWxldGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19idXR0b24tZGVsZXRlJyk7XG4gICAgdGhpcy5faXRlbUltZyA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2ltYWdlJyk7XG4gICAgdGhpcy5faXRlbVRpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdGl0bGUnKTtcbiAgICB0aGlzLl9idG5MaWtlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fYnV0dG9uLWxpa2UnKTtcbiAgICB0aGlzLl9jb3VudGVyTGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2NvdW50ZXItbGlrZScpO1xuICAgIHRoaXMuX2ltZ0NhcmQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpO1xuICB9XG4gIF9nZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2hlY2tWaXNpYmxlRm9yVHJhc2hCdXR0b24oKTtcbiAgICB0aGlzLl9jaGVja0xpa2VTdGF0dXMoKTtcbiAgICB0aGlzLl9pdGVtSW1nLnNyYyA9IHRoaXMuX2RhdGEubGluaztcbiAgICB0aGlzLl9pdGVtSW1nLmFsdCA9IHRoaXMuX2RhdGEubmFtZTtcbiAgICB0aGlzLl9pdGVtVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9kYXRhLm5hbWU7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmQ7XG4gIH1cbiAgX2NoZWNrTGlrZVN0YXR1cygpIHtcbiAgICB0aGlzLl9hcnJheUxpa2VzLmZvckVhY2goKGxpa2UpID0+IHtcbiAgICAgIGlmIChsaWtlLl9pZCA9PT0gdGhpcy5fbXlJZCkge1xuICAgICAgICB0aGlzLl9idG5MaWtlLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnRfX2J1dHRvbi1saWtlX2FjdGl2ZScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5fY291bnRlckxpa2UudGV4dENvbnRlbnQgPSB0aGlzLl9hcnJheUxpa2VzTGVuZ3RoO1xuICB9XG4gIF9jaGVja1Zpc2libGVGb3JUcmFzaEJ1dHRvbigpIHtcbiAgICB0aGlzLl9idG5EZWxldGUuY2xhc3NMaXN0LmFkZChcbiAgICAgIHRoaXMuX3VzZXJJZCA9PT0gdGhpcy5fbXlJZFxuICAgICAgICA/ICdlbGVtZW50X19idXR0b24tZGVsZXRlX3Zpc2libGUnXG4gICAgICAgIDogJ2VsZW1lbnRfX2J1dHRvbi1kZWxldGVfaGlkZGVuJ1xuICAgICk7XG4gIH1cblxuICBfaGFuZGxlTGlrZSgpIHtcbiAgICB0aGlzLl9jaGFuZ2VMaWtlKHRoaXMuX2NhcmRJZCwgdGhpcy5fYnRuTGlrZSk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fYnRuRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5oYW5kbGVDbGlja0J0bkRlbGV0ZSh0aGlzLl9kYXRhLCB0aGlzKTtcbiAgICB9KTtcbiAgICB0aGlzLl9idG5MaWtlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuX2ltZ0NhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmhhbmRsZUNsaWNrSW1nKHRoaXMuX2RhdGEubmFtZSwgdGhpcy5fZGF0YS5saW5rKTtcbiAgICB9KTtcbiAgfVxuICBjaGFuZ2VkTGlrZShsaWtlcykge1xuICAgIHRoaXMuX2J0bkxpa2UuY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9fYnV0dG9uLWxpa2VfYWN0aXZlJyk7XG4gICAgdGhpcy5fY291bnRlckxpa2UudGV4dENvbnRlbnQgPSBsaWtlcy5sZW5ndGg7XG4gIH1cblxuICBnZXRDYXJkKCkge1xuICAgIHRoaXMuX2dlbmVyYXRlQ2FyZCgpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmQ7XG4gIH1cbiAgcmVtb3ZlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJFbGVtZW50KSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXJFbGVtZW50O1xuICB9XG4gIHJlbmRlckl0ZW0oaXRlbSkge1xuICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICB9XG5cbiAgYWRkSXRlbVByZXBlbmQoZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCJsZXQgbG9nID0gY29uc29sZS5sb2c7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yUG9wdXApIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JQb3B1cCk7XG4gICAgdGhpcy5fYnRuQ2xvc2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Nsb3NlJyk7XG4gICAgdGhpcy5faGVuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oZW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XG4gIH1cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdtb2RhbF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGVuZGxlRXNjQ2xvc2UpO1xuICB9XG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oZW5kbGVFc2NDbG9zZSk7XG4gIH1cbiAgX2hlbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtb2RhbF9vcGVuZWQnKTtcbiAgICAgIHRoaXMuY2xvc2UocG9wdXApO1xuICAgIH1cbiAgfVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsX29wZW5lZCcpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kYWxfX2Nsb3NlJykpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yUG9wdXAsIHsgaGVuZGxlRGVsZXRlIH0pIHtcbiAgICBzdXBlcihzZWxlY3RvclBvcHVwKTtcbiAgICB0aGlzLl9oZW5kbGVEZWxldGUgPSBoZW5kbGVEZWxldGU7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fZm9ybScpO1xuICAgIHRoaXMuX2J0blllcyA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcignLm1vZGFsX19idXR0b24nKTtcbiAgICB0aGlzLl9idG5ZZXNEZWZhdWx0ID0gdGhpcy5fYnRuWWVzLnRleHRDb250ZW50O1xuICB9XG4gIG9wZW4oZGF0YSwgZWxlbWVudCkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gZGF0YTtcbiAgICB0aGlzLl9idG5EZWxldGUgPSBlbGVtZW50O1xuICB9XG5cbiAgc2V0dXBEZWZhdWx0VGV4dCgpIHtcbiAgICB0aGlzLl9idG5ZZXMudGV4dENvbnRlbnQgPSB0aGlzLl9idG5ZZXNEZWZhdWx0O1xuICB9XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hlbmRsZURlbGV0ZSh0aGlzLl9lbGVtZW50LCB0aGlzLl9idG5EZWxldGUpO1xuICAgICAgdGhpcy5fYnRuWWVzLnRleHRDb250ZW50ID0gYCR7dGhpcy5fYnRuWWVzLnRleHRDb250ZW50fSAuLi5gO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3JQb3B1cCkge1xuICAgIHN1cGVyKHNlbGVjdG9yUG9wdXApO1xuICAgIHRoaXMuX2ltZyA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9faW1nJyk7XG4gICAgdGhpcy5fdGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2hlYWRpbmcnKTtcbiAgfVxuXG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9pbWcuc3JjID0gbGluaztcbiAgICB0aGlzLl9pbWcuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl90aXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gIH1cbn1cbiIsIi8vIGNsYXNzIEZvcm1WYWxpZGF0b3Ig0LIg0LrQvtGC0L7RgNC+0Lwg0L/RgNC+0LjRgdGF0L7QtNC40YIg0LLQsNC70LjQtNCw0YbQuNGPINGE0L7RgNC8XG5jbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoXG4gICAgZm9ybSxcbiAgICB7XG4gICAgICBpbnB1dFNlbGVjdG9yLFxuICAgICAgc3VibWl0QnV0dG9uU2VsZWN0b3IsXG4gICAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzLFxuICAgICAgYWN0aXZlQnV0dG9uQ2xhc3MsXG4gICAgICBpbnB1dEVycm9yQ2xhc3MsXG4gICAgfVxuICApIHtcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcbiAgICB0aGlzLl9pbnB1dHMgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChpbnB1dFNlbGVjdG9yKSk7XG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBpbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b24gPSBpbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2FjdGl2ZUJ1dHRvbiA9IGFjdGl2ZUJ1dHRvbkNsYXNzO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVyc1ZhbGlkYXRpb24oKTtcbiAgfVxuICBfc2V0RXZlbnRMaXN0ZW5lcnNWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCk7XG4gICAgICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCkge1xuICAgIGNvbnN0IGN1cnJlbnRJbnB1dEVycm9yQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dC5pZH0tZXJyb3JgXG4gICAgKTtcblxuICAgIGlmIChpbnB1dC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgY3VycmVudElucHV0RXJyb3JDb250YWluZXIudGV4dENvbnRlbnQgPSAnJztcbiAgICAgIHRoaXMuX3JlbW92ZVJlZExpbmUoaW5wdXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50SW5wdXRFcnJvckNvbnRhaW5lci50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgICAgdGhpcy5fYWRkUmVkTGluZShpbnB1dCk7XG4gICAgfVxuICB9XG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0cy5zb21lKChpdGVtKSA9PiAhaXRlbS52YWxpZGl0eS52YWxpZCk7XG4gIH1cbiAgX2Rpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b24pO1xuICAgIHRoaXMuX2J1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gIH1cbiAgX2VuYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbik7XG4gICAgdGhpcy5fYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgfVxuICBfcmVtb3ZlUmVkTGluZShpbnB1dCkge1xuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgfVxuICBfYWRkUmVkTGluZShpbnB1dCkge1xuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgfVxuICByZXNldEVycm9yQW5kQ2xlYXJJbnB1dCgpIHtcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGNvbnN0IGVycm9yQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XG4gICAgICBlcnJvckNvbnRhaW5lci50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIH0pO1xuICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xubGV0IGxvZyA9IGNvbnNvbGUubG9nO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3JQb3B1cCwgeyBmb3JtU3VibWl0IH0pIHtcbiAgICBzdXBlcihzZWxlY3RvclBvcHVwKTtcbiAgICB0aGlzLl9mb3JtU3VibWl0ID0gZm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLm1vZGFsX19mb3JtJyk7XG4gICAgdGhpcy5faW5wdXRzID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWxfX2lucHV0Jyk7XG4gICAgdGhpcy5fYnRuU2F2ZSA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcignLm1vZGFsX19idXR0b24nKTtcbiAgICB0aGlzLl9idG5TYXZlRGVmYXVsdCA9IHRoaXMuX2J0blNhdmUudGV4dENvbnRlbnQ7XG4gIH1cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGZvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gZm9ybVZhbHVlcztcbiAgfVxuICBvcGVuKCkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgfVxuXG4gIHNldHVwRGVmYXVsdFRleHQoKSB7XG4gICAgdGhpcy5fYnRuU2F2ZS50ZXh0Q29udGVudCA9IHRoaXMuX2J0blNhdmVEZWZhdWx0O1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fZm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuX2J0blNhdmUudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUgLi4uJztcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih0aXRsZUVsZW1lbnQsIHN1YnRpdGxlRWxlbWVudCwgYXZhdGFyUHJvZmlsQmcpIHtcbiAgICB0aGlzLl90aXRsZUVsZW1lbnQgPSB0aXRsZUVsZW1lbnQ7XG4gICAgdGhpcy5fc3VidGl0bGVFbGVtZW50ID0gc3VidGl0bGVFbGVtZW50O1xuICAgIHRoaXMuX2F2YXRhclByb2ZpbEJnID0gYXZhdGFyUHJvZmlsQmc7XG4gIH1cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgY29uc3QgaW5mb1VzZXIgPSB7XG4gICAgICBuYW1lOiB0aGlzLl90aXRsZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fc3VidGl0bGVFbGVtZW50LnRleHRDb250ZW50LFxuICAgIH07XG4gICAgcmV0dXJuIGluZm9Vc2VyO1xuICB9XG5cbiAgc2V0VXNlckluZm8oZWxlbWVudCkge1xuICAgIHRoaXMuX2F2YXRhclByb2ZpbEJnLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHtlbGVtZW50LmF2YXRhcn0pYDtcbiAgICB0aGlzLl90aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSBlbGVtZW50Lm5hbWU7XG4gICAgdGhpcy5fc3VidGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gZWxlbWVudC5hYm91dDtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgaW5wdXRFZGl0TmFtZSxcbiAgaW5wdXRFZGl0QWJvdXQsXG4gIGZvcm1FZGl0UHJvZmlsZSxcbiAgdmFsaWRhdGlvbkNvbmZpZyxcbiAgZm9ybUNyZWFkQ2FyZCxcbiAgdGl0bGVFbGVtZW50LFxuICBidXR0b25PcGVuRWRpdFByb2ZpbGVGb3JtLFxuICBidXR0b25PcGVuQWRkQ2FyZEZvcm0sXG4gIHN1YnRpdGxlRWxlbWVudCxcbiAgdGVtcGxhdGVFbGVtZW50LFxuICBlbGVtZW50cyxcbiAgZm9ybUF2YXRhcixcbiAgYXZhdGFyUHJvZmlsQmcsXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMv0KFhcmQuanMnO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgJy4uL3BhZ2VzL2luZGV4LmNzcyc7XG5cbi8vINC30LDQs9C+0YLQvtCy0LrQsCDQtNC70Y8g0YHQvtC30LTQsNC90LjRjyDQvNC10YLQvtC00L7QsiDQutC70LDRgdGB0LAgQXBpXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjYnLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogJ2U2NzRhOTcwLTcxMGEtNDM1ZS04Y2E2LTk1ZWVhZGIyODUxZCcsXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgfSxcbn0pO1xuXG4vLyDRgdC+0LfQtNCw0L3QuNC1INGN0LrQt9C10LzQv9C70Y/RgNC+0LIg0LLQsNC70LDQtNCw0YbQuNC4INGE0L7RgNC8XG5jb25zdCB2YWxpZGF0ZUVkaXRGb3JtID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUVkaXRQcm9maWxlLCB2YWxpZGF0aW9uQ29uZmlnKTtcbmNvbnN0IHZhbGlkYXRlQ3JlYWRGb3JtID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUNyZWFkQ2FyZCwgdmFsaWRhdGlvbkNvbmZpZyk7XG5jb25zdCB2YWxpZGF0ZUF2YXRhckZvcm0gPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtQXZhdGFyLCB2YWxpZGF0aW9uQ29uZmlnKTtcbi8vINCy0LDQu9C40LTQsNGG0LjRjyDRhNC+0YDQvFxudmFsaWRhdGVBdmF0YXJGb3JtLmVuYWJsZVZhbGlkYXRpb24oKTtcbnZhbGlkYXRlRWRpdEZvcm0uZW5hYmxlVmFsaWRhdGlvbigpO1xudmFsaWRhdGVDcmVhZEZvcm0uZW5hYmxlVmFsaWRhdGlvbigpO1xuLy8g0YPRgdGC0LDQvdC+0LLQutCwINC+0LHRgNCw0LHQvtGC0YfQuNC60L7QsiAg0L3QsCBzZWN0aW9uIFByb2ZpbGUgINC00LvRjyDQvtGC0LrRgNGL0YLQuNGPINC40YUg0L/QvtC/0LDQv9C+0LJcbmF2YXRhclByb2ZpbEJnLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlbkF2YXRhclBvcHVwKTtcbmJ1dHRvbk9wZW5FZGl0UHJvZmlsZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuRWRpdFByb2ZpbGVQb3B1cCk7XG5idXR0b25PcGVuQWRkQ2FyZEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuQWRkQ2FyZFBvcHVwKTtcblxuLy8g0YHQvtC30LTQsNC90LjQtSBwb3B1cCfQvtCyXG5jb25zdCBwb3B1cENyZWF0ZSA9IG5ldyBQb3B1cFdpdGhGb3JtKCcjbXktbW9kYWwtY3JlYWQnLCB7XG4gIGZvcm1TdWJtaXQ6IGhhbmRsZVN1Ym1pdEZvcm1DYXJkLFxufSk7XG5jb25zdCBwb3B1cEltZyA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnI215LW1vZGFsLWltYWdlJyk7XG5jb25zdCBwb3B1cEVkaXQgPSBuZXcgUG9wdXBXaXRoRm9ybSgnI215LW1vZGFsLWVkaXQnLCB7XG4gIGZvcm1TdWJtaXQ6IGhhbmRsZVN1Ym1pdEZvcm1Qcm9maWxlLFxufSk7XG5jb25zdCBwb3B1cEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKCcjbXktbW9kYWwtYXZhdGFyJywge1xuICBmb3JtU3VibWl0OiBoZW5kbGVTdWJtaXRGb3JtQXZhdGFyLFxufSk7XG5jb25zdCBwb3B1cERlbGV0ZSA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oJyNteS1tb2RhbC1kZWxldGUnLCB7XG4gIGhlbmRsZURlbGV0ZTogZGVsZXRlQ2FyZCxcbn0pO1xuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8odGl0bGVFbGVtZW50LCBzdWJ0aXRsZUVsZW1lbnQsIGF2YXRhclByb2ZpbEJnKTtcbi8vINC30LDQv9GD0YHQuiDQvtCx0YDQsNCx0L7RgtGH0LjQutC+0LIg0YHQvtCx0YvRgtC40LlcbnBvcHVwRWRpdC5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBDcmVhdGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwSW1nLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBEZWxldGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbi8vINC+0YLQutGA0YvRgtC40LUgcG9wdXAn0L7QslxuZnVuY3Rpb24gb3BlbkFkZENhcmRQb3B1cCgpIHtcbiAgcG9wdXBDcmVhdGUub3BlbigpO1xuICB2YWxpZGF0ZUNyZWFkRm9ybS5yZXNldEVycm9yQW5kQ2xlYXJJbnB1dCgpO1xufVxuXG5mdW5jdGlvbiBvcGVuRWRpdFByb2ZpbGVQb3B1cCgpIHtcbiAgcG9wdXBFZGl0Lm9wZW4oKTtcbiAgZmlsbEluRWRpdFByb2ZpbGVGb3JtSW5wdXRzKHVzZXJJbmZvLmdldFVzZXJJbmZvKCkpO1xuICB2YWxpZGF0ZUVkaXRGb3JtLnJlc2V0RXJyb3JBbmRDbGVhcklucHV0KCk7XG59XG5cbmZ1bmN0aW9uIG9wZW5BdmF0YXJQb3B1cCgpIHtcbiAgcG9wdXBBdmF0YXIub3BlbigpO1xuICB2YWxpZGF0ZUF2YXRhckZvcm0ucmVzZXRFcnJvckFuZENsZWFySW5wdXQoKTtcbn1cbi8vINC+0LHRgNCw0LHQvtGC0YfQuNC60Lggc3VibWl0IGZvcm1cbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdEZvcm1DYXJkKGluZm9BZGQpIHtcbiAgYXBpXG4gICAgLmFkZENhcmRCeVNlcnZlcihpbmZvQWRkKVxuICAgIC50aGVuKChkYXRhQ2FyZCkgPT4ge1xuICAgICAgZGF0YUNhcmQubXlJZCA9IGRhdGFDYXJkLm93bmVyLl9pZDtcbiAgICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW0oZGF0YUNhcmQpO1xuICAgICAgcG9wdXBDcmVhdGUuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGDQntGI0LjQsdC60LAg0L/RgNC4INGB0L7Qt9C00LDQvdC40Lgg0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4OiAke2Vycn1gKSlcbiAgICAuZmluYWxseSgoKSA9PiBwb3B1cENyZWF0ZS5zZXR1cERlZmF1bHRUZXh0KCkpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVTdWJtaXRGb3JtUHJvZmlsZShpbmZvRWRpdCkge1xuICBhcGlcbiAgICAuc2V0VXNlckluZm8oaW5mb0VkaXQpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICAgICAgcG9wdXBFZGl0LmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihg0J7RiNC40LHQutCwINC/0YDQuCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNC4INC/0YDQvtGE0LjQu9GPOiAke2Vycn1gKSlcbiAgICAuZmluYWxseSgoKSA9PiBwb3B1cEVkaXQuc2V0dXBEZWZhdWx0VGV4dCgpKTtcbn1cblxuZnVuY3Rpb24gaGVuZGxlU3VibWl0Rm9ybUF2YXRhcihpbmZvKSB7XG4gIGFwaVxuICAgIC5zZXRVc2VyQXZhdGFyKGluZm8pXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICAgICAgcG9wdXBBdmF0YXIuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGDQntGI0LjQsdC60LAg0L/RgNC4INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Lgg0JDQstCw0YLQsNGA0LrQuDoke2Vycn1gKSlcbiAgICAuZmluYWxseSgoKSA9PiBwb3B1cEF2YXRhci5zZXR1cERlZmF1bHRUZXh0KCkpO1xufVxuLy8g0L7QsdGA0LDQsdC+0YLRh9C40Log0L3QsNC20LDRgtC40Y8g0L3QsCAg0LrQvtGA0LfQvdGDXG5mdW5jdGlvbiBoYW5kbGVDbGlja0J0bkRlbGV0ZShkYXRhLCBldnQpIHtcbiAgcG9wdXBEZWxldGUub3BlbihkYXRhLCBldnQpO1xufVxuLy8g0L7QsdGA0LDQsdC+0YLRh9C40Log0L3QsNC20LDRgtC40Y8g0L3QsCDQutCw0YDRgtC40L3QutGDXG5mdW5jdGlvbiBoYW5kbGVDbGlja0ltZyhuYW1lLCBsaW5rKSB7XG4gIHBvcHVwSW1nLm9wZW4obmFtZSwgbGluayk7XG59XG4vLyDQt9Cw0L/QvtC70L3QtdC90LjQtSDQv9C+0LvQtdC5IGlucHV0INGE0L7RgNC80YsgRWRpdFxuZnVuY3Rpb24gZmlsbEluRWRpdFByb2ZpbGVGb3JtSW5wdXRzKGluZm8pIHtcbiAgaW5wdXRFZGl0TmFtZS52YWx1ZSA9IGluZm8ubmFtZTtcbiAgaW5wdXRFZGl0QWJvdXQudmFsdWUgPSBpbmZvLmFib3V0O1xufVxuLy8g0YPQtNCw0LvQtdC90LjQtSDQutCw0YDRgtC+0YfQutC4XG5mdW5jdGlvbiBkZWxldGVDYXJkKGRhdGEsIGVsZW1lbnQpIHtcbiAgYXBpXG4gICAgLmRlbGV0ZUNhcmRCeVNlcnZlcihkYXRhKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIGVsZW1lbnQucmVtb3ZlQ2FyZCgpO1xuICAgICAgcG9wdXBEZWxldGUuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGDQntGI0LjQsdC60LAg0L/RgNC4INGD0LTQsNC70LXQvdC40Lgg0LrQsNGA0YLQvtGH0LrQuDoke2Vycn1gKSlcbiAgICAuZmluYWxseSgoKSA9PiBwb3B1cERlbGV0ZS5zZXR1cERlZmF1bHRUZXh0KCkpO1xufVxuLy8g0YHQvtC30LTQsNC90LjQtSDQutCw0YDRgtC+0YfQutC4XG5jb25zdCBjcmVhdGVDYXJkID0gKGl0ZW0pID0+IHtcbiAgY29uc3QgY2FyZEl0ZW0gPSBuZXcgQ2FyZChcbiAgICBpdGVtLFxuICAgIGhhbmRsZUNsaWNrSW1nLFxuICAgIHRlbXBsYXRlRWxlbWVudCxcbiAgICBoYW5kbGVDbGlja0J0bkRlbGV0ZSxcbiAgICAoaWRDYXJkLCBidG5MaWtlKSA9PiB7XG4gICAgICBpZiAoYnRuTGlrZS5jbGFzc0xpc3QuY29udGFpbnMoJ2VsZW1lbnRfX2J1dHRvbi1saWtlX2FjdGl2ZScpKSB7XG4gICAgICAgIGFwaVxuICAgICAgICAgIC5kZWxldGVMaWtlKGlkQ2FyZClcbiAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICBjYXJkSXRlbS5jaGFuZ2VkTGlrZShyZXMubGlrZXMpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYNCe0YjQuNCx0LrQsCDQv9GA0Lgg0YPQtNCw0LvQtdC90LjQuCDQu9Cw0LnQutCwOiR7ZXJyfWApO1xuICAgICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXBpXG4gICAgICAgICAgLmFkZExpa2UoaWRDYXJkKVxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgIGNhcmRJdGVtLmNoYW5nZWRMaWtlKHJlcy5saWtlcyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihg0J7RiNC40LHQutCwINC/0YDQuCDQtNC+0LHQsNCy0LvQtdC90LjQuCDQu9Cw0LnQutCwOiR7ZXJyfWApO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbiAgcmV0dXJuIGNhcmRJdGVtLmdldENhcmQoKTtcbn07XG4vLyDQtNC+0LHQsNCy0LvQtdC90LjQtSDQs9C+0YLQvtCy0YvRhSDQutCw0YDRgtC+0YfQtdC6INC90LAg0YHRgtCw0YDQvdC40YbRg1xuY29uc3QgY3JlYXRlSXRlbSA9IChkYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGRhdGEpO1xuICBjYXJkU2VjdGlvbi5hZGRJdGVtUHJlcGVuZChjYXJkKTtcbn07XG4vLyDQutC70LDRgdGBICDRgSDQv9C+0LzQvtGJ0YzRjiDQutC+0YLQvtGA0L7Qs9C+INC90LXQv9C+0YHRgNC10LTRgdGC0LLQtdC90L3QviDQuNC00LXRgiDQtNC+0LHQsNCy0LvQtdC90LjQtVxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY3JlYXRlSXRlbShpdGVtKTtcbiAgICB9LFxuICB9LFxuICBlbGVtZW50c1xuKTtcbi8vINC30LDQv9GA0L7RgSDQvdCwINGB0LXRgNCy0LXRgCDQuNC90YTQvtGA0LzQsNGG0LjQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0Lgg0LrQsNGA0YLQvtGH0LXQulxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0Q2FyZHMoKV0pXG4gIC50aGVuKChbZGF0YVVzZXIsIGRhdGFDYXJkXSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKGRhdGFDYXJkKTtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhVXNlcik7XG4gICAgZGF0YUNhcmQucmV2ZXJzZSgpLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIGVsZW1lbnQubXlJZCA9IGRhdGFVc2VyLl9pZDtcbiAgICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW0oZWxlbWVudCk7XG4gICAgfSk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PlxuICAgIGNvbnNvbGUuZXJyb3IoYNCe0YjQuNCx0LrQsCDQv9GA0Lgg0YHQvtC30LTQsNC90LjQuCDQvdCw0YfQsNC70YzQvdGL0YUg0LTQsNC90L3Ri9GFINGB0YLRgNCw0L3QuNGG0Ys6ICR7ZXJyfWApXG4gICk7XG4iXSwibmFtZXMiOlsiaW5wdXRFZGl0TmFtZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImlucHV0RWRpdEFib3V0IiwiYXZhdGFyUHJvZmlsQmciLCJ0aXRsZUVsZW1lbnQiLCJzdWJ0aXRsZUVsZW1lbnQiLCJidXR0b25PcGVuRWRpdFByb2ZpbGVGb3JtIiwiYnV0dG9uT3BlbkFkZENhcmRGb3JtIiwiZm9ybUF2YXRhciIsImZvcm1zIiwiZm9ybUNyZWFkQ2FyZCIsImZvcm1FZGl0UHJvZmlsZSIsInRlbXBsYXRlRWxlbWVudCIsImNvbnRlbnQiLCJlbGVtZW50cyIsInZhbGlkYXRpb25Db25maWciLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiQXBpIiwib3B0aW9ucyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJfYXV0aG9yaXphdGlvbiIsImF1dGhvcml6YXRpb24iLCJfY29udGVuVHlwZSIsImtleSIsInZhbHVlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsImZldGNoIiwiY29uY2F0IiwidGhlbiIsIl9jaGVja1Jlc3BvbnNlIiwiZGF0YSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibmFtZSIsImxpbmsiLCJhYm91dCIsImF2YXRhciIsIl9pZCIsImlkIiwiQ2FyZCIsImhhbmRsZUNsaWNrSW1nIiwiaGFuZGxlQ2xpY2tCdG5EZWxldGUiLCJjaGFuZ2VMaWtlIiwiX2RhdGEiLCJfY2hhbmdlTGlrZSIsIl90ZW1wbGF0ZSIsIl9jYXJkSWQiLCJfdXNlcklkIiwib3duZXIiLCJfYXJyYXlMaWtlcyIsImxpa2VzIiwiX2FycmF5TGlrZXNMZW5ndGgiLCJsZW5ndGgiLCJfbXlJZCIsIm15SWQiLCJfY2FyZCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwiX2J0bkRlbGV0ZSIsIl9pdGVtSW1nIiwiX2l0ZW1UaXRsZSIsIl9idG5MaWtlIiwiX2NvdW50ZXJMaWtlIiwiX2ltZ0NhcmQiLCJfY2hlY2tWaXNpYmxlRm9yVHJhc2hCdXR0b24iLCJfY2hlY2tMaWtlU3RhdHVzIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJfdGhpcyIsImZvckVhY2giLCJsaWtlIiwiY2xhc3NMaXN0IiwiYWRkIiwiX3RoaXMyIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlIiwidG9nZ2xlIiwiX2dlbmVyYXRlQ2FyZCIsIl9zZXRFdmVudExpc3RlbmVycyIsInJlbW92ZSIsIlNlY3Rpb24iLCJfcmVmIiwiY29udGFpbmVyRWxlbWVudCIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImNvbnNvbGUiLCJsb2ciLCJQb3B1cCIsInNlbGVjdG9yUG9wdXAiLCJfcG9wdXAiLCJfYnRuQ2xvc2UiLCJfaGVuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0IiwicG9wdXAiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsIl9Qb3B1cCIsIl9pbmhlcml0cyIsIl9zdXBlciIsImhlbmRsZURlbGV0ZSIsImNhbGwiLCJfaGVuZGxlRGVsZXRlIiwiX2Zvcm0iLCJfYnRuWWVzIiwiX2J0blllc0RlZmF1bHQiLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwicHJldmVudERlZmF1bHQiLCJQb3B1cFdpdGhJbWFnZSIsIl9pbWciLCJfdGl0bGUiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybSIsIl9pbnB1dHMiLCJBcnJheSIsImZyb20iLCJfYnV0dG9uIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9pbmFjdGl2ZUJ1dHRvbiIsIl9hY3RpdmVCdXR0b24iLCJfc2V0RXZlbnRMaXN0ZW5lcnNWYWxpZGF0aW9uIiwiaW5wdXQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX2hhc0ludmFsaWRJbnB1dCIsIl9kaXNhYmxlQnV0dG9uIiwiX2VuYWJsZUJ1dHRvbiIsImN1cnJlbnRJbnB1dEVycm9yQ29udGFpbmVyIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9yZW1vdmVSZWRMaW5lIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfYWRkUmVkTGluZSIsInNvbWUiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJQb3B1cFdpdGhGb3JtIiwiZm9ybVN1Ym1pdCIsIl9mb3JtU3VibWl0IiwiX2J0blNhdmUiLCJfYnRuU2F2ZURlZmF1bHQiLCJmb3JtVmFsdWVzIiwicmVzZXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJVc2VySW5mbyIsIl90aXRsZUVsZW1lbnQiLCJfc3VidGl0bGVFbGVtZW50IiwiX2F2YXRhclByb2ZpbEJnIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJhcGkiLCJ2YWxpZGF0ZUVkaXRGb3JtIiwidmFsaWRhdGVDcmVhZEZvcm0iLCJ2YWxpZGF0ZUF2YXRhckZvcm0iLCJlbmFibGVWYWxpZGF0aW9uIiwicG9wdXBBdmF0YXIiLCJvcGVuIiwicmVzZXRFcnJvckFuZENsZWFySW5wdXQiLCJpbmZvIiwicG9wdXBFZGl0IiwidXNlckluZm8iLCJnZXRVc2VySW5mbyIsInBvcHVwQ3JlYXRlIiwiaW5mb0FkZCIsImFkZENhcmRCeVNlcnZlciIsImRhdGFDYXJkIiwiY2FyZFNlY3Rpb24iLCJyZW5kZXJJdGVtIiwiY2F0Y2giLCJlcnIiLCJlcnJvciIsImZpbmFsbHkiLCJzZXR1cERlZmF1bHRUZXh0IiwicG9wdXBJbWciLCJpbmZvRWRpdCIsInNldFVzZXJJbmZvIiwic2V0VXNlckF2YXRhciIsInBvcHVwRGVsZXRlIiwiZGVsZXRlQ2FyZEJ5U2VydmVyIiwicmVtb3ZlQ2FyZCIsInNldEV2ZW50TGlzdGVuZXJzIiwiY2FyZEl0ZW0iLCJjYXJkIiwiaWRDYXJkIiwiYnRuTGlrZSIsImRlbGV0ZUxpa2UiLCJjaGFuZ2VkTGlrZSIsImFkZExpa2UiLCJnZXRDYXJkIiwiYWRkSXRlbVByZXBlbmQiLCJhbGwiLCJnZXRDYXJkcyIsIl9yZWYyIiwiZGF0YVVzZXIiLCJyZXZlcnNlIl0sInNvdXJjZVJvb3QiOiIifQ==